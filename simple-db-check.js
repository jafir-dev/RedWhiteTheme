// Simple database connection test
// This will help us understand what's happening with the database

console.log("üîç Simple Database Connection Check");
console.log("===================================");
console.log();
console.log("Since the API is still crashing, let's test the database connection directly.");
console.log();
console.log("üéØ TEST 1: Check your Supabase connection details");
console.log("=============================================");
console.log();
console.log("Your Supabase URL should be:");
console.log("https://galpmbhkatffdfelprab.supabase.co");
console.log();
console.log("üéØ TEST 2: Try connecting with psql (if available)");
console.log("===============================================");
console.log();
console.log("If you have psql installed, try this command:");
console.log();
console.log("psql 'postgresql://postgres.galpmbhkatffdfelprab:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.co:6543/postgres'");
console.log();
console.log("Replace [YOUR-PASSWORD] with your actual database password.");
console.log();
console.log("üéØ TEST 3: Check via curl to Supabase REST API");
console.log("===============================================");
console.log();
console.log("Try this curl command to test the connection:");
console.log();
console.log("curl -X POST 'https://galpmbhkatffdfelprab.supabase.co/rest/v1/rpc/get_table_schema' \\");
console.log("  -H 'apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdhbHBtYmhrYXRmZmRmZWxwcmFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyNTIwODcsImV4cCI6MjA3OTgyODA4N30.QW3r_0sQrT9Yq1y-jS8z4rH4t2QkQ1Z1e1e1e1e1e1e1' \\");
console.log("  -H 'Content-Type: application/json' \\");
console.log("  -d '{\"table_name\": \"users\"}'");
console.log();
console.log("üéØ TEST 4: Quick SQL queries to run in Supabase Dashboard");
console.log("=====================================================");
console.log();
console.log("1. Check all tables:");
console.log("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public';");
console.log();
console.log("2. Check if jewelry_requests exists:");
console.log("SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'jewelry_requests');");
console.log();
console.log("3. Check if loan_requests exists:");
console.log("SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'loan_requests');");
console.log();
console.log("4. Check users table structure:");
console.log("\\d users");
console.log();
console.log("5. Check user data:");
console.log("SELECT email, spins_remaining, total_spins_used FROM users WHERE email IN ('jafir94@gmail.com', 'jafircq@gmail.com');");
console.log();
console.log("üîç What we're looking for:");
console.log("=========================");
console.log();
console.log("‚úÖ jewelry_requests table exists ‚Üí Migration worked");
console.log("‚ùå loan_requests table exists ‚Üí Need to rename or revert code");
console.log("‚ùå Neither table exists ‚Üí Need to create jewelry_requests");
console.log();
console.log("üöÄ Once we know the table status, we can fix the API quickly!");
console.log();
console.log("The fact that you can play the game means basic API works, but some");
console.log("endpoints are crashing due to table mismatches.");